<div class="w-100 py-3 flex justify-content-between">
    <div>
        <p-breadcrumb  styleClass="max-w-full pt-2" [style]="{background:'transparent', padding:'0px'}" [model]="items">
            <ng-template pTemplate="item" let-item>
                <ng-container *ngIf="item.route; else elseBlock">
                    <a [routerLink]="item.route" class="p-menuitem-link bg-transparent p-0">
                        <span class="text-primary">{{ item.label }}</span>
                    </a>
                </ng-container>
                <ng-template #elseBlock>
                    <a [href]="item.url "class="p-menuitem-link bg-transparent">
                        <span class="text-color">{{ item.label }}</span>
                    </a>
                </ng-template>
            </ng-template>
        </p-breadcrumb>
        <h1 class="text-2xl pt-3">PERFIL</h1>
    </div>
</div>

<p-card *ngIf="!loading">
    <div class="grid pt-4">
        <div class="col-12 lg:col-6">
            <p-floatLabel>
                <input pInputText id="user" value="{{user().name}}" class="w-full" disabled="true"/>
                <label for="user">Usuario </label>
            </p-floatLabel>
        </div>
            
        <div class="col-6 lg:col-3">
            <p-floatLabel>
                <input pInputText id="role" value="{{user().role.name}}"  class="w-full" disabled="true"/>
                <label for="role">Role </label>
            </p-floatLabel>
        </div>
    
        <div class="col-6 lg:col-3">
            <p-floatLabel>
                <input pInputText id="created" value="{{user().created_at | date:'hh:mm:ss dd/MM/yyyy'}}" class="w-full" disabled="true"/>
                <label for="created">Creación </label>
            </p-floatLabel>
        </div>
        <div class="col-12 lg:col-3">
            <p-floatLabel>
                <input pInputText id="email"  value="{{user().email}}" class="w-full" disabled="true"/>
                <label for="email">Email </label>
            </p-floatLabel>
        </div>
    @if(user().employees[0]){
        <div class="col-4 lg:col-1">
            <p-floatLabel>
                <input pInputText id="document_type"  value="{{user().employees[0].document_type}}" class="w-full" disabled="true"/>
                <label for="document_type">Tipo</label>
            </p-floatLabel>
        </div>
        <div class="col-8 lg:col-2">
            <p-floatLabel>
                <input pInputText id="document_number" value="{{user().employees[0].document_number}}" class="w-full" disabled="true"/>
                <label for="document_number">N° de documento </label>
            </p-floatLabel>
        </div>
        
        <div class="col-12 lg:col-3">
            <p-floatLabel>
                <input pInputText id="job_title" value="{{user().employees[0].job_title.name}}" class="w-full" disabled="true"/>
                <label for="job_title">Cargo </label>
            </p-floatLabel>
        </div>
    
        <div class="col-12 lg:col-3">
            <p-floatLabel>
                <input pInputText id="establishment" value="{{user().employees[0].establishment.name}}" class="w-full" disabled="true"/>
                <label for="establishment">Area </label>
            </p-floatLabel>
        </div>
    }

    </div>
    <p-divider/>
    <span class="text-xl pt-3">Nueva contraseña</span>
    <form class="grid pt-3" [formGroup]="frmEdit">
        <div class="col-12 lg:col-6">
            <p-floatLabel>
                <p-password id="password" formControlName="password" [toggleMask]="true" [style]="{width: '100%'}"></p-password>
                <label for="password">Contraseña </label>
            </p-floatLabel>
            <small class="text-xs text-pink-600" style="height: 1em;">
            {{ getErrorMessageOnEdit('password') }}
            </small>
        </div>

        <div class="col-12 lg:col-6">
            <p-floatLabel>
                <p-password id="confirm_password" formControlName="confirm_password" [style]="{width: '100%'}"></p-password>
                <label for="confirm_password">Confirmar contraseña</label>
            </p-floatLabel>
            <small class="text-xs text-pink-600" style="height: 1em;">
                {{ getErrorMessageOnEdit('confirm_password') }}
            </small>
        </div>  
        <div class="col-12 pt-3 text-right">
            <button pButton type="button" label="ACTUALIZAR" size="large" severity="success" [outlined]="true" (click)="handleSubmit()"></button>
        </div>
    </form>
    
</p-card>

<!-- Loading spinner or message -->
<div *ngIf="loading" class="text-center" style="padding-top:25vh;">
    <i class="pi pi-spin pi-spinner" aria-hidden="true" style="font-size: 2rem"></i>
</div>
